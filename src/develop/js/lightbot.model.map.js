/*jsl:option explicit*/
/*jsl:import lightbot.model.game.js*/

(function() {
  var map = {};

  // all the maps of the game
  var maps = [
  {
    "direction": 0,
    "position": {"x": 4, "y": 5},
    "map": [
      [{"h":2, "t":"b"}, {"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"}, {"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":2, "t":"b"}],
      [{"h":2, "t":"b"}, {"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"}, {"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":2, "t":"b"}],
      [{"h":2, "t":"b"}, {"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"}, {"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":2, "t":"b"}],
      [{"h":2, "t":"b"}, {"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"}, {"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":2, "t":"b"}],
      [{"h":2, "t":"b"}, {"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"l"}, {"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":2, "t":"b"}],
      [{"h":2, "t":"b"}, {"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"}, {"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":2, "t":"b"}],
      [{"h":2, "t":"b"}, {"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"}, {"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":2, "t":"b"}],
      [{"h":2, "t":"b"}, {"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"}, {"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":2, "t":"b"}]
    ],
    "medals": {
      "gold": 3,
      "silver": 4,
      "bronze": 5
    }
  },
  {
    "direction": 0,
    "position": {"x": 2, "y": 5},
    "map": [
      [{"h":2, "t":"b"}, {"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"}, {"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":2, "t":"b"}],
      [{"h":2, "t":"b"}, {"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"}, {"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":2, "t":"b"}],
      [{"h":2, "t":"b"}, {"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"}, {"h":1, "t":"b"},{"h":1, "t":"l"},{"h":1, "t":"b"},{"h":2, "t":"b"}],
      [{"h":2, "t":"b"}, {"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"}, {"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":2, "t":"b"}],
      [{"h":2, "t":"b"}, {"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"}, {"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":2, "t":"b"}],
      [{"h":2, "t":"b"}, {"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"}, {"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":2, "t":"b"}],
      [{"h":2, "t":"b"}, {"h":1, "t":"b"},{"h":1, "t":"l"},{"h":1, "t":"b"},{"h":1, "t":"b"}, {"h":1, "t":"b"},{"h":1, "t":"l"},{"h":1, "t":"b"},{"h":2, "t":"b"}],
      [{"h":2, "t":"b"}, {"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"}, {"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":2, "t":"b"}]
    ],
    "medals": {
      "gold": 5,
      "silver": 7,
      "bronze": 11
    }
  },
  {
    "direction": 0,
    "position": {"x": 4, "y": 6},
    "map": [
      [{"h":4, "t":"b"}, {"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"}, {"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":4, "t":"b"}],
      [{"h":3, "t":"b"}, {"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"}, {"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":3, "t":"b"}],
      [{"h":2, "t":"b"}, {"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"}, {"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":2, "t":"b"}],
      [{"h":2, "t":"b"}, {"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"}, {"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":2, "t":"b"}],
      [{"h":2, "t":"b"}, {"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":4, "t":"b"}, {"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":2, "t":"b"}],
      [{"h":2, "t":"b"}, {"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"}, {"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":2, "t":"b"}],
      [{"h":3, "t":"b"}, {"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"l"}, {"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":3, "t":"b"}],
      [{"h":4, "t":"b"}, {"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"}, {"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":4, "t":"b"}]
    ],
    "medals": {
      "gold": 6,
      "silver": 8,
      "bronze": 11
    }
  },
  {
    "direction": 0,
    "position": {"x": 4, "y": 7},
    "map": [
      [{"h":1, "t":"b"}, {"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"}, {"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"}],
      [{"h":1, "t":"b"}, {"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"}, {"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"}],
      [{"h":2, "t":"b"}, {"h":2, "t":"b"},{"h":2, "t":"b"},{"h":2, "t":"b"},{"h":2, "t":"b"}, {"h":2, "t":"b"},{"h":2, "t":"b"},{"h":2, "t":"b"},{"h":2, "t":"b"}],
      [{"h":1, "t":"b"}, {"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"}, {"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"}],
      [{"h":1, "t":"b"}, {"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"l"}, {"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"}],
      [{"h":1, "t":"b"}, {"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"}, {"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"}],
      [{"h":1, "t":"b"}, {"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"}, {"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"}],
      [{"h":1, "t":"b"}, {"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"}, {"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"}]
    ],
    "medals": {
      "gold": 4,
      "silver": 5,
      "bronze": 6
    }
  },
  {
    "direction": 1,
    "position": {"x": 1, "y": 5},
    "map": [
      [{"h":1, "t":"b"}, {"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"}, {"h":1, "t":"b"},{"h":1, "t":"b"}],
      [{"h":1, "t":"b"}, {"h":1, "t":"b"},{"h":1, "t":"b"},{"h":2, "t":"b"},{"h":3, "t":"b"}, {"h":3, "t":"b"},{"h":1, "t":"b"}],
      [{"h":1, "t":"b"}, {"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"}, {"h":3, "t":"b"},{"h":1, "t":"b"}],
      [{"h":1, "t":"b"}, {"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"}, {"h":3, "t":"b"},{"h":1, "t":"b"}],
      [{"h":1, "t":"b"}, {"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"}, {"h":3, "t":"b"},{"h":1, "t":"b"}],
      [{"h":1, "t":"b"}, {"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"}, {"h":3, "t":"b"},{"h":1, "t":"b"}],
      [{"h":1, "t":"b"}, {"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"}, {"h":3, "t":"l"},{"h":1, "t":"b"}]
    ],
    "medals": {
      "gold": 7,
      "silver": 8,
      "bronze": 11
    }
  },
  {
    "direction": 0,
    "position": {"x": 2, "y": 4},
    "map": [
      [{"h":1, "t":"b"}, {"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"}, {"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"}],
      [{"h":1, "t":"b"}, {"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"}, {"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"}],
      [{"h":1, "t":"b"}, {"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"}, {"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"}],
      [{"h":1, "t":"b"}, {"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"}, {"h":1, "t":"b"},{"h":6, "t":"l"},{"h":1, "t":"b"}],
      [{"h":1, "t":"b"}, {"h":1, "t":"b"},{"h":2, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"}, {"h":1, "t":"b"},{"h":5, "t":"b"},{"h":1, "t":"b"}],
      [{"h":1, "t":"b"}, {"h":1, "t":"b"},{"h":3, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"}, {"h":1, "t":"b"},{"h":4, "t":"b"},{"h":1, "t":"b"}],
      [{"h":1, "t":"b"}, {"h":1, "t":"b"},{"h":3, "t":"b"},{"h":3, "t":"b"},{"h":3, "t":"b"}, {"h":3, "t":"b"},{"h":3, "t":"b"},{"h":1, "t":"b"}],
      [{"h":1, "t":"b"}, {"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"}, {"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"}]
    ],
    "medals": {
      "gold": 7,
      "silver": 10,
      "bronze": 13
    }
  },
  {
    "direction": 1,
    "position": {"x": 1, "y": 5},
    "map": [
      [{"h":1, "t":"b"}, {"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"}, {"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"}],
      [{"h":1, "t":"b"}, {"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"}, {"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"}],
      [{"h":1, "t":"b"}, {"h":1, "t":"b"},{"h":1, "t":"b"},{"h":2, "t":"b"},{"h":3, "t":"b"}, {"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"}],
      [{"h":1, "t":"b"}, {"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":4, "t":"b"}, {"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"}],
      [{"h":1, "t":"b"}, {"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":5, "t":"l"}, {"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"}],
      [{"h":1, "t":"b"}, {"h":3, "t":"l"},{"h":3, "t":"b"},{"h":3, "t":"b"},{"h":3, "t":"b"}, {"h":3, "t":"b"},{"h":3, "t":"b"},{"h":3, "t":"l"},{"h":1, "t":"b"}],
      [{"h":1, "t":"b"}, {"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"}, {"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"}],
      [{"h":1, "t":"b"}, {"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"}, {"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"}]
    ],
    "medals": {
      "gold": 10,
      "silver": 17,
      "bronze": 22
    }
  },
  {
    "direction": 1,
    "position": {"x": 1, "y": 3},
    "map": [
      [{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":3, "t":"l"}, {"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"}],
      [{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":3, "t":"b"}, {"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"}],
      [{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":3, "t":"b"}, {"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"}],
      [{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":5, "t":"b"}, {"h":5, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"}],
      [{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":2, "t":"b"},{"h":3, "t":"b"}, {"h":4, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"}],
      [{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":4, "t":"b"}, {"h":5, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"}],
      [{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":3, "t":"b"}, {"h":3, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"}],
      [{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"}, {"h":3, "t":"l"},{"h":1, "t":"b"},{"h":1, "t":"b"}]
    ],
    "medals": {
      "gold": 16,
      "silver": 25,
      "bronze": 26
    }
  },
  {
    "direction": 0,
    "position": {"x": 4, "y": 7},
    "map": [
      [{"h":3, "t":"b"},{"h":3, "t":"b"},{"h":2, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"}, {"h":1, "t":"b"},{"h":2, "t":"b"},{"h":3, "t":"b"},{"h":3, "t":"b"}],
      [{"h":3, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"l"}, {"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":3, "t":"b"}],
      [{"h":2, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"l"}, {"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":2, "t":"b"}],
      [{"h":2, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"l"}, {"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":2, "t":"b"}],
      [{"h":2, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"l"}, {"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":2, "t":"b"}],
      [{"h":2, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"l"}, {"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":2, "t":"b"}],
      [{"h":2, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"l"}, {"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":2, "t":"b"}],
      [{"h":2, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"l"}, {"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":2, "t":"b"}]
    ],
    "medals": {
      "gold": 3,
      "silver": 14,
      "bronze": 15
    }
  },
  {
    "direction": 0,
    "position": {"x": 4, "y": 7},
    "map": [
      [{"h":3, "t":"b"},{"h":3, "t":"b"},{"h":2, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"}, {"h":1, "t":"b"},{"h":2, "t":"b"},{"h":3, "t":"b"},{"h":3, "t":"b"}],
      [{"h":3, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":2, "t":"l"}, {"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":3, "t":"b"}],
      [{"h":2, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":3, "t":"l"}, {"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":2, "t":"b"}],
      [{"h":2, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":4, "t":"l"}, {"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":2, "t":"b"}],
      [{"h":2, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"}, {"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":2, "t":"b"}],
      [{"h":2, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":2, "t":"l"}, {"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":2, "t":"b"}],
      [{"h":2, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":3, "t":"l"}, {"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":2, "t":"b"}],
      [{"h":2, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":4, "t":"l"}, {"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":2, "t":"b"}]
    ],
    "medals": {
      "gold": 3,
      "silver": 7,
      "bronze": 13
    }
  },
  {
    "direction": 0,
    "position": {"x": 4, "y": 7},
    "map": [
      [{"h":2, "t":"b"}, {"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"}, {"h":1, "t":"b"},{"h":1, "t":"b"},{"h":2, "t":"b"}],
      [{"h":1, "t":"b"}, {"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"l"},{"h":1, "t":"l"}, {"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"}],
      [{"h":2, "t":"b"}, {"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"l"},{"h":1, "t":"l"}, {"h":1, "t":"b"},{"h":1, "t":"b"},{"h":2, "t":"b"}],
      [{"h":1, "t":"b"}, {"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"l"},{"h":1, "t":"l"}, {"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"}],
      [{"h":2, "t":"b"}, {"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"l"},{"h":1, "t":"l"}, {"h":1, "t":"b"},{"h":1, "t":"b"},{"h":2, "t":"b"}],
      [{"h":1, "t":"b"}, {"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"l"},{"h":1, "t":"l"}, {"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"}],
      [{"h":2, "t":"b"}, {"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"l"},{"h":1, "t":"l"}, {"h":1, "t":"b"},{"h":1, "t":"b"},{"h":2, "t":"b"}],
      [{"h":1, "t":"b"}, {"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"l"},{"h":1, "t":"l"}, {"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"}]
    ],
    "medals": {
      "gold": 7,
      "silver": 9,
      "bronze": 11
    }
  },
  {
    "direction": 0,
    "position": {"x": 1, "y": 7},
    "map": [
      [{"h":1, "t":"b"},{"h":1, "t":"b"}, {"h":2, "t":"l"},{"h":1, "t":"l"},{"h":2, "t":"l"},{"h":1, "t":"l"}, {"h":2, "t":"l"},{"h":3, "t":"b"}],
      [{"h":1, "t":"b"},{"h":1, "t":"l"}, {"h":2, "t":"l"},{"h":1, "t":"l"},{"h":2, "t":"l"},{"h":1, "t":"l"}, {"h":2, "t":"l"},{"h":3, "t":"b"}],
      [{"h":1, "t":"b"},{"h":1, "t":"l"}, {"h":2, "t":"l"},{"h":1, "t":"l"},{"h":2, "t":"l"},{"h":1, "t":"l"}, {"h":2, "t":"l"},{"h":3, "t":"b"}],
      [{"h":1, "t":"b"},{"h":1, "t":"l"}, {"h":2, "t":"l"},{"h":1, "t":"l"},{"h":2, "t":"l"},{"h":1, "t":"l"}, {"h":2, "t":"l"},{"h":3, "t":"b"}],
      [{"h":1, "t":"b"},{"h":1, "t":"l"}, {"h":2, "t":"l"},{"h":1, "t":"l"},{"h":2, "t":"l"},{"h":1, "t":"l"}, {"h":2, "t":"l"},{"h":3, "t":"b"}],
      [{"h":1, "t":"b"},{"h":1, "t":"l"}, {"h":2, "t":"l"},{"h":1, "t":"l"},{"h":2, "t":"l"},{"h":1, "t":"l"}, {"h":2, "t":"l"},{"h":3, "t":"b"}],
      [{"h":1, "t":"b"},{"h":1, "t":"l"}, {"h":2, "t":"l"},{"h":1, "t":"l"},{"h":2, "t":"l"},{"h":1, "t":"l"}, {"h":2, "t":"l"},{"h":3, "t":"b"}],
      [{"h":1, "t":"b"},{"h":1, "t":"l"}, {"h":2, "t":"l"},{"h":1, "t":"l"},{"h":2, "t":"l"},{"h":1, "t":"l"}, {"h":2, "t":"l"},{"h":3, "t":"b"}]
    ],
    "medals": {
      "gold": 13,
      "silver": 33,
      "bronze": 104
    }
  },
  {
    "direction": 0,
    "position": {"x": 1, "y": 6},
    "map": [
      [{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"}, {"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"}],
      [{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":2, "t":"b"},{"h":1, "t":"b"}, {"h":1, "t":"b"},{"h":2, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"}],
      [{"h":1, "t":"b"},{"h":2, "t":"b"},{"h":3, "t":"l"},{"h":2, "t":"l"}, {"h":2, "t":"l"},{"h":3, "t":"l"},{"h":2, "t":"b"},{"h":1, "t":"b"}],
      [{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":2, "t":"l"},{"h":1, "t":"b"}, {"h":1, "t":"b"},{"h":2, "t":"l"},{"h":1, "t":"b"},{"h":1, "t":"b"}],
      [{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":2, "t":"l"},{"h":1, "t":"b"}, {"h":1, "t":"b"},{"h":2, "t":"l"},{"h":1, "t":"b"},{"h":1, "t":"b"}],
      [{"h":1, "t":"b"},{"h":2, "t":"b"},{"h":3, "t":"l"},{"h":2, "t":"l"}, {"h":2, "t":"l"},{"h":3, "t":"l"},{"h":2, "t":"b"},{"h":1, "t":"b"}],
      [{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":2, "t":"b"},{"h":1, "t":"b"}, {"h":1, "t":"b"},{"h":2, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"}],
      [{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"}, {"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"}]
    ],
    "medals": {
      "gold": 11,
      "silver": 29,
      "bronze": 29
    }
  },
  {
    "direction": 1,
    "position": {"x": 1, "y": 5},
    "map": [
      [{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"}, {"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"}],
      [{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":2, "t":"b"},{"h":2, "t":"l"}, {"h":2, "t":"b"},{"h":2, "t":"l"},{"h":1, "t":"b"}],
      [{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":2, "t":"b"}, {"h":1, "t":"b"},{"h":2, "t":"b"},{"h":1, "t":"b"}],
      [{"h":1, "t":"b"},{"h":2, "t":"l"},{"h":2, "t":"b"},{"h":2, "t":"l"}, {"h":2, "t":"b"},{"h":2, "t":"l"},{"h":1, "t":"b"}],
      [{"h":1, "t":"b"},{"h":2, "t":"b"},{"h":1, "t":"b"},{"h":2, "t":"b"}, {"h":1, "t":"b"},{"h":2, "t":"b"},{"h":1, "t":"b"}],
      [{"h":1, "t":"b"},{"h":2, "t":"l"},{"h":2, "t":"b"},{"h":2, "t":"l"}, {"h":2, "t":"b"},{"h":2, "t":"l"},{"h":1, "t":"b"}],
      [{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"}, {"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"}]
    ],
    "medals": {
      "gold": 7,
      "silver": 24,
      "bronze": 28
    }
  },
  {
    "direction": 1,
    "position": {"x": 1, "y": 4},
    "map": [
      [{"h":1, "t":"b"}, {"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"}, {"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"}],
      [{"h":1, "t":"b"}, {"h":1, "t":"b"},{"h":1, "t":"b"},{"h":5, "t":"l"},{"h":4, "t":"l"}, {"h":3, "t":"l"},{"h":2, "t":"l"},{"h":1, "t":"b"},{"h":1, "t":"b"}],
      [{"h":1, "t":"b"}, {"h":1, "t":"b"},{"h":1, "t":"b"},{"h":4, "t":"l"},{"h":1, "t":"b"}, {"h":1, "t":"b"},{"h":3, "t":"l"},{"h":1, "t":"b"},{"h":1, "t":"b"}],
      [{"h":1, "t":"b"}, {"h":1, "t":"b"},{"h":1, "t":"b"},{"h":3, "t":"l"},{"h":1, "t":"b"}, {"h":1, "t":"b"},{"h":4, "t":"l"},{"h":1, "t":"b"},{"h":1, "t":"b"}],
      [{"h":1, "t":"b"}, {"h":1, "t":"b"},{"h":1, "t":"b"},{"h":2, "t":"l"},{"h":3, "t":"l"}, {"h":4, "t":"l"},{"h":5, "t":"l"},{"h":1, "t":"b"},{"h":1, "t":"b"}],
      [{"h":1, "t":"b"}, {"h":1, "t":"b"},{"h":1, "t":"b"},{"h":3, "t":"l"},{"h":1, "t":"b"}, {"h":1, "t":"b"},{"h":4, "t":"l"},{"h":1, "t":"b"},{"h":1, "t":"b"}],
      [{"h":1, "t":"b"}, {"h":1, "t":"b"},{"h":1, "t":"b"},{"h":4, "t":"l"},{"h":1, "t":"b"}, {"h":1, "t":"b"},{"h":3, "t":"l"},{"h":1, "t":"b"},{"h":1, "t":"b"}],
      [{"h":1, "t":"b"}, {"h":1, "t":"b"},{"h":1, "t":"b"},{"h":5, "t":"l"},{"h":4, "t":"l"}, {"h":3, "t":"l"},{"h":2, "t":"l"},{"h":1, "t":"b"},{"h":1, "t":"b"}],
      [{"h":1, "t":"b"}, {"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"}, {"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"}]
    ],
    "medals": {
      "gold": 13,
      "silver": 16,
      "bronze": 26
    }
  },
  {
    "direction": 1,
    "position": {"x": 1, "y": 3},
    "map": [
      [{"h":1, "t":"b"}, {"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"}, {"h":1, "t":"b"},{"h":1, "t":"b"}],
      [{"h":1, "t":"b"}, {"h":2, "t":"l"},{"h":2, "t":"b"},{"h":2, "t":"b"},{"h":2, "t":"b"}, {"h":2, "t":"l"},{"h":1, "t":"b"}],
      [{"h":1, "t":"b"}, {"h":2, "t":"b"},{"h":3, "t":"l"},{"h":3, "t":"b"},{"h":3, "t":"l"}, {"h":2, "t":"b"},{"h":1, "t":"b"}],
      [{"h":1, "t":"b"}, {"h":2, "t":"b"},{"h":3, "t":"b"},{"h":4, "t":"l"},{"h":3, "t":"b"}, {"h":2, "t":"b"},{"h":1, "t":"b"}],
      [{"h":1, "t":"b"}, {"h":2, "t":"b"},{"h":3, "t":"l"},{"h":3, "t":"b"},{"h":3, "t":"l"}, {"h":2, "t":"b"},{"h":1, "t":"b"}],
      [{"h":1, "t":"b"}, {"h":2, "t":"l"},{"h":2, "t":"b"},{"h":2, "t":"b"},{"h":2, "t":"b"}, {"h":2, "t":"l"},{"h":1, "t":"b"}],
      [{"h":1, "t":"b"}, {"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"}, {"h":1, "t":"b"},{"h":1, "t":"b"}]
    ],
    "medals": {
      "gold": 10,
      "silver": 32,
      "bronze": 43
    }
  },
  {
    "direction": 0,
    "position": {"x": 0, "y": 6},
    "map": [
      [{"h":1, "t":"b"}, {"h":3, "t":"l"},{"h":1, "t":"b"}],
      [{"h":1, "t":"b"}, {"h":3, "t":"b"},{"h":1, "t":"b"}],
      [{"h":1, "t":"b"}, {"h":3, "t":"b"},{"h":1, "t":"b"}],
      [{"h":1, "t":"b"}, {"h":5, "t":"b"},{"h":5, "t":"b"}],
      [{"h":2, "t":"b"}, {"h":3, "t":"b"},{"h":4, "t":"b"}],
      [{"h":1, "t":"b"}, {"h":1, "t":"b"},{"h":3, "t":"b"}],
      [{"h":4, "t":"l"}, {"h":3, "t":"b"},{"h":3, "t":"b"}]
    ],
    "medals": {
      "gold": 19,
      "silver": 20,
      "bronze": 28
    },
    "programs": [
      "pPPPRppFRP",
      "PRR",
      "FJFFJ?R"
    ]
  },
  {
    "direction": 3,
    "position": {"x": 2, "y": 0},
    "map": [
      [{"h":1, "t":"b"}, {"h":2, "t":"l"},{"h":2, "t":"b"},{"h":2, "t":"l"}, {"h":1, "t":"b"}],
      [{"h":2, "t":"l"}, {"h":2, "t":"l"},{"h":1, "t":"b"},{"h":2, "t":"l"}, {"h":2, "t":"l"}],
      [{"h":2, "t":"b"}, {"h":1, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"}, {"h":2, "t":"b"}],
      [{"h":2, "t":"l"}, {"h":2, "t":"l"},{"h":1, "t":"b"},{"h":2, "t":"l"}, {"h":2, "t":"l"}],
      [{"h":1, "t":"b"}, {"h":2, "t":"l"},{"h":2, "t":"b"},{"h":2, "t":"l"}, {"h":1, "t":"b"}],
    ],
    "medals": {
      "gold": 9,
      "silver": 10,
      "bronze": 16
    },
    "programs": [
      "p",
      "PRPJFJp",
      "F?"
    ]
  },
  {
    "direction": 2,
    "position": {"x": 0, "y": 2},
    "map": [
      [{"h":1, "t":"b"}, {"h":1, "t":"b"},{"h":1, "t":"l"},{"h":1, "t":"b"},{"h":2, "t":"b"}, {"h":1, "t":"b"},{"h":1, "t":"l"},{"h":1, "t":"b"},{"h":1, "t":"b"}],
      [{"h":1, "t":"b"}, {"h":2, "t":"l"},{"h":2, "t":"b"},{"h":1, "t":"l"},{"h":2, "t":"b"}, {"h":1, "t":"l"},{"h":1, "t":"b"},{"h":2, "t":"l"},{"h":1, "t":"b"}],
      [{"h":1, "t":"l"}, {"h":1, "t":"b"},{"h":2, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"}, {"h":1, "t":"b"},{"h":2, "t":"b"},{"h":2, "t":"b"},{"h":1, "t":"l"}],
      [{"h":1, "t":"b"}, {"h":1, "t":"l"},{"h":1, "t":"b"},{"h":2, "t":"b"},{"h":2, "t":"b"}, {"h":2, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"l"},{"h":1, "t":"b"}],
      [{"h":2, "t":"b"}, {"h":2, "t":"b"},{"h":1, "t":"b"},{"h":2, "t":"b"},{"h":2, "t":"b"}, {"h":2, "t":"b"},{"h":1, "t":"b"},{"h":2, "t":"b"},{"h":2, "t":"b"}],
      [{"h":1, "t":"b"}, {"h":1, "t":"l"},{"h":1, "t":"b"},{"h":2, "t":"b"},{"h":2, "t":"b"}, {"h":2, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"l"},{"h":1, "t":"b"}],
      [{"h":1, "t":"l"}, {"h":2, "t":"b"},{"h":2, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"b"}, {"h":1, "t":"b"},{"h":2, "t":"b"},{"h":1, "t":"b"},{"h":1, "t":"l"}],
      [{"h":1, "t":"b"}, {"h":2, "t":"l"},{"h":1, "t":"b"},{"h":1, "t":"l"},{"h":2, "t":"b"}, {"h":1, "t":"l"},{"h":2, "t":"b"},{"h":2, "t":"l"},{"h":1, "t":"b"}],
      [{"h":1, "t":"b"}, {"h":1, "t":"b"},{"h":1, "t":"l"},{"h":1, "t":"b"},{"h":2, "t":"b"}, {"h":1, "t":"b"},{"h":1, "t":"l"},{"h":1, "t":"b"},{"h":1, "t":"b"}]
    ],
    "medals": {
      "gold": 3,
      "silver": 4,
      "bronze": 5
    }
  },
  ];

  var levelSize = {'x': 0, 'y': 0}; // the level size
  var mapRef = null; // the actual map values
  var medals = null; // medals for the level
  var levelNumber = null; // what level is the user currently playing

  map.translateCmdToClassName = function(cmd) {
    switch(cmd) {
      case 'J': return "jump";
      case 'F': return "walk";
      case 'L': return "turnLeft";
      case 'R': return "turnRight";
      case '?': return "light";
      case 'p': return "proc1";
      case 'P': return "proc2";
    }
    console.log("translateCmdToClassName unknown cmd", cmd)
    return "unknown";
  },
  map.loadPrograms = function(x) {
    const progs = maps[x].programs
    if (!progs) return [];
    const result = [[],[],[]];
    for (let i=0;i<3;i++) {
      for (const char of progs[i]) {
        result[i].push(this.translateCmdToClassName(char))
      }
    }
    return result;
  }

  /*map.loadMaps = function() {
    $.getJSON('maps/maps.txt', function(data){
      maps = data;
    });
  };*/

  map.loadMap = function(x) {
    if (!maps) {
      console.error('Map list is empty');
    } else {
      // set the level number
      levelNumber = x;

      // set the bot starting direction
      lightBot.bot.init(maps[x].direction, maps[x].position);

      // set the level medals
      medals = maps[x].medals;

      // map files are defined user-friendly so we have to adapt to that
      levelSize.x = maps[x].map[0].length; // we suppose map is a rectangle
      levelSize.y = maps[x].map.length;

      mapRef = new Array(levelSize.x);
      for (i = 0; i < levelSize.x; i++) {
        mapRef[i] = new Array(levelSize.y);
      }

      var botInMap = false;
      var nbrLights = 0;

      for (var i = 0; i < maps[x].map.length; i++){
        for (var j = 0; j < maps[x].map[i].length; j++) {
          switch (maps[x].map[i][j].t) {
            case 'b':
              mapRef[j][maps[x].map.length - i - 1] = new lightBot.Box(maps[x].map[i][j].h, j, maps[x].map.length - i - 1);
              break;
            case 'l':
              mapRef[j][maps[x].map.length - i - 1] = new lightBot.LightBox(maps[x].map[i][j].h, j, maps[x].map.length - i - 1);
              nbrLights++;
              break;
            default:
              // output error and fall back to box element
              console.error('Map contains unsupported element: ' + maps[x].map[i][j].t);
              mapRef[j][maps.map.length - i - 1] = new lightBot.Box(maps[x].map[i][j].h, j, maps[x].map.length - i - 1);
              break;
          }
        }
      }

      if (nbrLights === 0) {
        console.error('No light defined in map');
      }
    }
  };

  map.reset = function() {
    lightBot.bot.reset();
    for (var i = 0; i < levelSize.x; i++) {
      for (var j = 0; j < levelSize.y; j++) {
        mapRef[i][j].reset();
      }
    }
  };

  /* getters and setters */
  map.ready = function() {
    return levelNumber !== null;
  };

  map.getLevelSize = function() {
    return levelSize;
  };

  map.getMapRef = function() {
    return mapRef;
  };

  map.getMedals = function() {
    return medals;
  };

  map.getLevelNumber = function() {
    return levelNumber;
  };

  map.getNbrOfLevels = function() {
    return maps.length;
  };

  map.complete = function() {
    levelNumber = null; // by setting levelNumber to null, the map is marked as completed
  };

  lightBot.map = map;
})();
